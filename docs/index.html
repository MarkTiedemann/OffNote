
<title>OffNote</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<link rel='shortcut icon' type='image/png' href='/favicon.png'/>

<style>

body {
  margin: 0;
  padding: 0;
  display: flex;
  align-items: center;
  overflow-x: hidden;
}

textarea {
  width: 100%;
  min-height: 100%;

  margin: auto;
  padding: 33px 44px;

  font-family: 'Segoe UI';
  font-size: 22px;
  line-height: 22px;
  letter-spacing: 0.11px;

  border: none;
  outline: none;
  border-color: transparent;
  background-color: transparent;

  overflow: hidden;

  white-space: pre-wrap;
  overflow-wrap: break-word;
}

</style>

<textarea wrap='hard' spellcheck='false' autofocus>




** OffNote - Simple Offline Notepad **













// Activate ✈️-mode and try it yourself!




</textarea>

<script>

// RESIZING

const textarea = document.querySelector('textarea')

const width = x => x <= 555 ? x : 555 + x / 11.11

const updateSize = () => {
  requestAnimationFrame(() => {
    const scrollTop  = window.pageYOffset || document.body.scrollTop
    textarea.style.width = width(window.innerWidth) + 'px'
    textarea.style.height = 'auto'
    textarea.style.height = textarea.scrollHeight
    window.scrollTo(0, scrollTop)
  })
}

updateSize()
window.onresize = updateSize

// TEXT

const ITEM = 'offnote-text'

const loadText = () => {
    const text = localStorage.getItem(ITEM)
    if (text !== null) textarea.value = text
}

const saveText = () =>
  requestIdleCallback(() =>
    localStorage.setItem(ITEM, textarea.value))

loadText()
textarea.oninput = () => {
    saveText()
    updateSize()
}

// SERVICE WORKER

if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    const DEV_ENV = location.href.startsWith('http://localhost:3000/')
    navigator.serviceWorker.register('service-worker.js', {
      scope: DEV_ENV ? '/' : '/offnote/'
    })
    .catch(e => DEV_ENV ? console.error('Failed to register:', e) : 0)
  })
}

</script>
